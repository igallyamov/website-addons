<?xml version="1.0" encoding="utf-8"?>
<openerp>
<data>

<template id="get_subcategories" name="Subcategory list">
  <ul t-att-class="'dropdown-menu'">
    <t t-foreach="c.child_id" t-as="c">
      <li> 
        <a t-att-href="keep('/shop/category/' + slug(c), category=0)" t-field="c.name"></a>
      </li>
    </t>
  </ul>                  
</template>

<template id="top_menu_products_categories"  inherit_id="website_sale.products">
  <xpath expr="//div[@class='row']" position="after">
    <div t-att-class="'ig_top_menu'">
      <ul t-att-class="'nav navbar-nav navbar-collapse collapse'"> 
        <t t-foreach="categories" t-as="c">
          <li t-att-class="'dropdown active'">
            <a t-att-data-toggle="'dropdown'" t-att-href="keep('/shop/category/' + slug(c), category=0)" t-field="c.name" t-att-class="'dropdown-toggle hidden-xs'"></a>
            <t t-call="website_sale_top_menu.get_subcategories"/>
          </li>
        </t>
      </ul>
    </div>
  </xpath>
</template>

  <template id="left_menu_products_categories" inherit_id="website_sale.products_categories">
    <xpath expr="//div[@id='products_grid_before']" position="replace">
      <div t-att-class="'col-md-3 hidden-xs' if category else ''" t-att-id="'products_grid_before'">
        <t t-if="category">
          <t t-foreach="categories" t-as="c">
             <ul t-if="c.child_id" class="nav nav-pills nav-stacked nav-hierarchy">
               <t t-foreach="c.child_id" t-as="ch">
                 <t t-if="ch.parent_id.id == category.parent_id.id">
                   <li t-att-class="'active' if ch.id == int(category or 0) else ''">
                       <a t-att-href="keep('/shop/category/' + slug(ch), category=0)" t-field="ch.name"></a>
                   </li>    
                 </t>
              </t>
            </ul>
          </t>
        </t>
      </div>
  </xpath>
<!--  <xpath expr="//div[@id='products_grid']" position="attributes">
     <t t-if="not category"> 
         <attributes name="style">width: 100%</attributes>
     </t>
     <t t-if="category"> 
         <attributes name="style">width: 75%</attributes>
     </t>
  </xpath>
</template> -->

</data>
</openerp>
